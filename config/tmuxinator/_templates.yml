# ~/.config/tmuxinator/_templates.yml
# DO NOT start this project - it's a template library only
#
# Master template definitions for all tmuxinator projects
# Use YAML anchors to eliminate duplication across project files

name: _templates

# ============================================================================
# HOOK TEMPLATES
# ============================================================================

definitions:
  # Standard project hooks (no logging)
  standard_hooks: &standard_hooks
    on_project_start: &on_project_start |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      setup_vscode_marker "<%= @args[0] || @settings['name'] %>"

    on_project_stop: &on_project_stop |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      cleanup_vscode_marker "<%= @args[0] || @settings['name'] %>"

    pre_window: &pre_window |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      open_vscode_once "<%= @args[0] || @settings['name'] %>"

  # Task management hooks (for cloud-agents, etc.)
  taskdock_hooks: &taskdock_hooks
    on_project_start: &taskdock_start |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      mkdir -p .git/taskdock-locks
      taskdock locks cleanup --quiet || true

    on_project_stop: &taskdock_stop |
      taskdock locks cleanup --quiet || true

  # ============================================================================
  # PANE TEMPLATES - AI Agents
  # ============================================================================

  claude_pane: &claude_pane
    - |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      pane_setup "claude"
      claude

  gemini_pane: &gemini_pane
    - |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      pane_setup "gemini"
      # Replace with actual Gemini CLI command when available
      echo "ðŸ”· Gemini AI Agent"
      echo "Starting Gemini CLI..."
      # gemini

  codex_pane: &codex_pane
    - |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      pane_setup "codex"
      # Replace with actual Codex CLI command when available
      echo "ðŸ”¶ Codex AI Agent"
      echo "Starting Codex CLI..."
      # codex

  # ============================================================================
  # PANE TEMPLATES - Development Tools
  # ============================================================================

  git_pane: &git_pane
    - |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      pane_setup "git"
      lazygit

  shell_pane: &shell_pane
    - |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      pane_setup "shell"
      clear

  dev_pane: &dev_pane
    - |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      pane_setup "dev"
      npm run dev

  vault_pane: &vault_pane
    - |
      source ~/.config/tmuxinator/scripts/common-setup.sh
      pane_setup "vault"
      if command -v "$HOME/code/dotfiles/bin/vault/vault" >/dev/null 2>&1; then
        "$HOME/code/dotfiles/bin/vault/vault" status
      else
        echo "Vault manager not available"
      fi
      echo
      echo "Vault shortcuts:"
      echo "  Ctrl-g V - Browse all vaults"
      echo "  Ctrl-g v - Open current project vault"
      echo "  Ctrl-g D - Browse docs vaults"

  # ============================================================================
  # WINDOW TEMPLATES - Pre-configured Windows
  # ============================================================================

  claude_window: &claude_window
    name: claude
    panes: *claude_pane

  git_window: &git_window
    name: git
    panes: *git_pane

  dev_window: &dev_window
    name: dev
    panes: *dev_pane

  vault_window: &vault_window
    name: vault
    panes: *vault_pane

  shell_window: &shell_window
    name: shell
    panes: *shell_pane

  # Multi-AI agent window (tiled layout)
  ai_agents_window: &ai_agents_window
    name: ai-agents
    layout: tiled
    panes:
      - *claude_pane
      - *gemini_pane
      - *codex_pane
      - *shell_pane

  # Dual-AI window (side-by-side)
  dual_ai_window: &dual_ai_window
    name: ai-agents
    layout: main-vertical
    panes:
      - *claude_pane
      - *gemini_pane

  # ============================================================================
  # PROJECT TEMPLATES - Complete Configurations
  # ============================================================================

  # Basic project: Claude + Git (2 windows)
  basic_project: &basic_project
    tmux_options: -f ~/.tmux.conf
    startup_window: claude
    startup_pane: 1
    windows:
      - *claude_window
      - *git_window

  # Standard project: Claude + Git + Shell (3 windows)
  standard_project: &standard_project
    tmux_options: -f ~/.tmux.conf
    startup_window: claude
    startup_pane: 1
    windows:
      - *claude_window
      - *git_window
      - *shell_window

  # Full stack project: Claude + Git + Dev + Vault (4 windows)
  fullstack_project: &fullstack_project
    tmux_options: -f ~/.tmux.conf
    startup_window: claude
    startup_pane: 1
    windows:
      - *claude_window
      - *git_window
      - *dev_window
      - *vault_window

  # AI-powered project: Multiple agents + tools
  ai_project: &ai_project
    tmux_options: -f ~/.tmux.conf
    startup_window: ai-agents
    startup_pane: 1
    windows:
      - *ai_agents_window
      - *git_window
      - *dev_window
      - *vault_window

  # Dual AI project: Two agents side-by-side + tools
  dual_ai_project: &dual_ai_project
    tmux_options: -f ~/.tmux.conf
    startup_window: ai-agents
    startup_pane: 1
    windows:
      - *dual_ai_window
      - *git_window
      - *dev_window
      - *vault_window
